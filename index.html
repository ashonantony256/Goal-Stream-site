<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Football Fixtures (Responsive)</title>
  <style>
    :root{
      --bg:#0f172a;
      --card:#1e293b;
      --muted:#94a3b8;
      --accent:#38bdf8;
      --live:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Poppins",sans-serif;
      background:var(--bg);
      color:#f1f5f9;
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:100vh;
      padding-bottom:20px;
    }

    h1{
      margin:22px 0 8px;
      font-size:1.6rem;
      color:var(--accent);
      text-align:center;
    }

    .fixture-list{
      width:94%;
      max-width:900px;
      display:flex;
      flex-direction:column;
      gap:12px;
      z-index:1;
    }

    .fixture{
      background:var(--card);
      border-radius:10px;
      padding:12px 16px;
      cursor:pointer;
      transition:transform .12s,background .12s;
    }
    .fixture:hover{transform:translateY(-2px); background:#334155}

    .fixture.live{ border-left:4px solid var(--live); background:#1f2937 }
    .fixture-grid{
      display:grid;
      grid-template-columns:1fr auto 1fr;
      align-items:center;
      gap:10px;
      text-align:center;
    }

    .team-side{
      display:flex;
      align-items:center;
      gap:8px;
      justify-content:center;
      white-space:nowrap;
    }

    .team-side img{
      width:76px;
      height:76px;
      object-fit:cover;
      background:#334155;
      border-radius:8px;
      flex-shrink:0;
    }

    .fixture-time{ font-weight:600; color:#f8fafc; font-size:1rem }

    .fixture-bottom{ text-align:center; font-size:.85rem; color:var(--muted); margin-top:6px }

    .live-tag{
      background:var(--live);
      color:#fff;
      font-size:.72rem;
      font-weight:700;
      padding:3px 6px;
      border-radius:6px;
      margin-left:8px;
      animation:pulse 1.6s infinite;
    }

    @keyframes pulse{0%{opacity:1}50%{opacity:.45}100%{opacity:1}}

    /* Ad containers */
    .ad-label{ font-size:.75rem; color:var(--muted); margin:8px 0; text-align:center }
    #top-ad{ width:100%; max-width:900px; display:flex; justify-content:center; align-items:center; margin-bottom:8px; }
    .ad-container-right{
      position:fixed; top:120px; right:16px; width:160px; text-align:center; z-index:99;
    }

    footer{ margin-top:18px; padding:14px; font-size:.8rem; color:#64748b; text-align:center }

    /* ----- Force iframes to be responsive (override ad script styles) ----- */
    #top-ad iframe,
    .ad-container-right iframe,
    #top-ad > div,
    .ad-container-right > div {
      max-width:100% !important;
      width:100% !important;
      height:auto !important;
      display:block !important;
      border:0 !important;
    }

    /* Hide problematic inline width/height or absolute styles */
    #top-ad[style],
    .ad-container-right[style]{
      max-width:100% !important;
      overflow:hidden !important;
    }

    /* ---------------- Responsive rules ---------------- */
    @media (max-width: 900px) {
      .ad-container-right{ display:none !important; } /* hide side banner on tablets and phones */
      #top-ad{ padding:0 12px; }
    }

    @media (max-width: 768px) {
      h1{ font-size:1.3rem; margin-top:18px }
      .team-side img{ width:56px; height:56px }
      .fixture{ padding:10px 12px }
      .fixture-grid{ grid-template-columns:1fr; gap:6px; text-align:left }
      .fixture-time{ font-size:.95rem; text-align:left }
      .team-side{ justify-content:flex-start }
      .fixture-bottom{ text-align:left; font-size:.78rem; margin-top:4px }
      /* Remove top ad completely on small phones if still intrusive */
      #top-ad.responsive-hide{ display:none !important; }
    }

    @media (max-width: 420px) {
      .team-side img{ width:44px; height:44px }
      .fixture-time{ font-size:.9rem }
      .fixture-bottom{ font-size:.72rem }
      body{ padding:0 6px }
    }
  </style>
</head>
<body>
  <h1>âš½ Live Football Fixtures</h1>

  <div class="ad-label">Advertisement</div>
  <div id="top-ad" aria-hidden="true">
    <!-- ad script may inject an iframe here -->
    <script type="text/javascript">
      atOptions = {'key':'01c2d9886b859a95bc1e4e364628ea64','format':'iframe','height':90,'width':728,'params':{}};
    </script>
    <script src="//www.highperformanceformat.com/01c2d9886b859a95bc1e4e364628ea64/invoke.js"></script>
  </div>

  <div class="fixture-list" id="fixtures" aria-live="polite"></div>

  <div class="ad-container-right" id="side-ad" aria-hidden="true">
    <div class="ad-label">Advertisement</div>
    <script type="text/javascript">
      atOptions = {'key':'4ce2db646abd0578e9a22bf5e3e0d17b','format':'iframe','height':300,'width':160,'params':{}};
    </script>
    <script src="//www.highperformanceformat.com/4ce2db646abd0578e9a22bf5e3e0d17b/invoke.js"></script>
  </div>

  <footer>Powered by Goal Stream</footer>

  <script>
    // Remove/hide ad containers on small screens as a JS fallback (in case CSS is overridden)
    (function(){
      function adaptAds(){
        const w = window.innerWidth || document.documentElement.clientWidth;
        const topAd = document.getElementById('top-ad');
        const sideAd = document.getElementById('side-ad');

        // if screen is narrow, remove side ad and optionally hide top ad
        if(w <= 900){
          if(sideAd) sideAd.remove();
        }

        // if very small, hide top ad too (optional)
        if(w <= 420){
          if(topAd) topAd.classList.add('responsive-hide');
        } else {
          if(topAd) topAd.classList.remove('responsive-hide');
        }
      }

      // run on load and resize
      window.addEventListener('load', adaptAds);
      window.addEventListener('resize', adaptAds);
      // also run after a short delay (ad scripts might inject later)
      setTimeout(adaptAds, 1500);
    })();
  </script>

  <script>
    // fixtures loader (unchanged logic but defensive)
    async function loadFixtures(){
      try{
        const resp = await fetch('match_details.json');
        if(!resp.ok) throw new Error('HTTP '+resp.status);
        const fixtures = await resp.json();
        const container = document.getElementById('fixtures');
        const now = new Date();

        fixtures.forEach(f=>{
          const div=document.createElement('div');
          div.className='fixture';
          const fixtureDateTime = new Date(`${f.fixtureDate}T${f.fixtureTime}:00`);
          const endTime = new Date(fixtureDateTime.getTime() + 2*60*60*1000);
          const isLive = now >= fixtureDateTime && now <= endTime;
          if(isLive) div.classList.add('live');

          // use smaller placeholders for mobile
          const homeLogo = f.homeLogo || 'https://via.placeholder.com/80';
          const awayLogo = f.awayLogo || 'https://via.placeholder.com/80';

          div.innerHTML = `
            <div class="fixture-grid">
              <div class="team-side">
                <img src="${homeLogo}" alt="${f.homeTeam}">
                <span>${f.homeTeam}</span>
              </div>
              <div class="fixture-time">
                ${f.fixtureTime} ${isLive ? '<span class="live-tag">LIVE</span>' : ''}
              </div>
              <div class="team-side">
                <span>${f.awayTeam}</span>
                <img src="${awayLogo}" alt="${f.awayTeam}">
              </div>
            </div>
            <div class="fixture-bottom">${f.fixtureDate}</div>
          `;

          div.addEventListener('click', ()=>{
            const url = new URL('stream.html', window.location.href);
            url.searchParams.set('source', f.streamSource);
            url.searchParams.set('home', f.homeTeam);
            url.searchParams.set('away', f.awayTeam);
            window.location.href = url.toString();
          });

          container.appendChild(div);
        });

      }catch(err){
        console.error('Failed to load fixtures',err);
        document.getElementById('fixtures').innerHTML = '<p style="color:#f87171">Error loading fixtures. Run with a local server.</p>';
      }
    }
    loadFixtures();
  </script>

  <!-- keep the external tracker/ad script last (it may inject iframes) -->
  <script type='text/javascript' src='//pl27894393.effectivegatecpm.com/eb/8d/d4/eb8dd41af713fe0c3a9ea071d15b1937.js'></script>
</body>
</html>
